<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ChatTopBar.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ChatTopBar.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { makeStyles } from '@material-ui/core/styles';
import { useSelector, useDispatch } from 'react-redux';
import React, { useState, useEffect } from 'react';
import Stack from '@mui/material/Stack';
import Button from '@mui/material/Button';
import PropTypes from 'prop-types';
import Grid from '@material-ui/core/Grid';
import Typography from '@material-ui/core/Typography';
import { Popover } from '@mui/material';
import Link from '@mui/material/Link';
import { Modal } from '@material-ui/core';
import { Box } from '@mui/system';
import MoreHorizIcon from '@mui/icons-material/MoreHoriz';
import SouthEastIcon from '@mui/icons-material/SouthEast';
import CloseIcon from '@mui/icons-material/Close';
import MenuList from '@mui/material/MenuList';
import MenuItem from '@mui/material/MenuItem';

import axios from 'axios';
import {
  removeChatBoxIDOnly,
  removeChatBoxID,
} from '../../states/reducers/ChatReducer';

const style = {
  position: 'absolute',
  top: '50%',
  left: '50%',
  transform: 'translate(-50%, -50%)',
  width: 600,
  color: 'white',
  bgcolor: 'transparent',
  margin: '20px',
  boxShadow: 24,
  p: 4,
};

const useStyles = makeStyles({
  table: {
    minWidth: 650,
  },
  headBG: {
    backgroundColor: '#e0e0e0',
  },
  borderRight500: {
    borderRight: '1px solid #e0e0e0',
  },
  messageArea: {
    height: '50vh',
    width: '100%',
    overflowY: 'auto',
  },
  inputArea: {
    height: '12vh',
    width: '100%',
  },
  topBar: {
    backgroundColor: '#008080',
    padding: '8px',
    display: 'flex',
    width: '300px',
    height: '40px',
    borderTopLeftRadius: '4px',
    borderTopReightRadius: '4px',
  },
  chatButtons: {
    cursor: 'pointer',
  },
});
/**
 * This function is for the ChatTopBar component this component is a part of chat componenet ,
 * it has close icon ,minimize icon,and menue list to delete the conversation or block friend
 * @method
 * @param {number} id id to determine the spacific chat for close or minimize.
 * @param {function} setMessages setMessages this function is to set the messages
 * state using for delete conversation
 * @returns {*} ChatTopBar componenet
 */
function ChatTopBar({ id, setMessages }) {
  const [morehorpress, morehorPressHandle] = useState(false);
  const dispatch = useDispatch();
  const classes = useStyles();
  const [anchorEl, setAnchorEl] = useState(null);
  const [deleteConvS, deleteConv] = useState(false);
  const [blockConvS, blockConv] = useState(false);
  const apiBaseUrl = 'http://localhost:8000';
  const [friendnameS, setFriendName] = useState('');
  const [friendImgS, setFriendImg] = useState('');

  const myFriends = useSelector((state) => state.Chat.chats);

  const handleMoreOpenClick = (event) => {
    // dispatch(morehorpressHandle());
    morehorPressHandle(!morehorpress);
    setAnchorEl(event.currentTarget);
  };

  const handleMoreCloseClick = () => {
    // dispatch(morehorpressHandle());
    morehorPressHandle(!morehorpress);
    setAnchorEl(null);
  };
  const DeleteConversation = () => {
    axios({
      method: 'PATCH',
      url: `${apiBaseUrl}/chatsforoneuser/${id}`,
      headers: {
        'Content-Type': 'application/json',
      },
      data: { chat_messages: [] },
    })
      .then(() => {
        // dispatch(deleteConversation());
        setMessages([]);
      })
      .catch((err) => {
        console.log(err.message);
      });
  };
  useEffect(() => {
    const friendname = myFriends.filter((elem) => elem.id === id);
    setFriendImg(friendname[0].img);
    setFriendName(friendname[0].to);
  }, []);
  return (
    &lt;Grid container xs={12} className={classes.topBar}>
      &lt;Grid item xs={6} className={classes.chatParticipant}>
        &lt;Typography noWrap>
          &lt;Link color="#fff" href="/" style={{ textDecoration: 'none' }}>
            nadeen
          &lt;/Link>
          &lt;Link color="#fff" href="/" style={{ textDecoration: 'none' }}>
            +
          &lt;/Link>
          &lt;Link color="#fff" href="/" style={{ textDecoration: 'none' }}>
            {friendnameS}
          &lt;/Link>
        &lt;/Typography>
      &lt;/Grid>
      &lt;Grid item xs={6} className={classes.chatButtons}>
        &lt;MoreHorizIcon
          onClick={handleMoreOpenClick}
          style={{ fill: '#fff', margin: '2px', marginLeft: '40px' }}
        />
        {morehorpress ? (
          &lt;Popover
            open={morehorpress}
            anchorEl={anchorEl}
            onClose={handleMoreCloseClick}
            anchorOrigin={{
              vertical: 'bottom',
              horizontal: 'center',
            }}
            transformOrigin={{
              vertical: 'bottom',
              horizontal: 'center',
            }}
          >
            &lt;MenuList
              id="composition-menu"
              aria-labelledby="composition-button"
            >
              &lt;MenuItem>Sound settings&lt;/MenuItem>
              &lt;br />
              &lt;MenuItem
                onClick={() => {
                  deleteConv(!deleteConvS);
                }}
              >
                &lt;Modal
                  open={deleteConvS}
                  onClose={() => {
                    deleteConv(!deleteConvS);
                  }}
                  aria-labelledby="modal-modal-title"
                  aria-describedby="modal-modal-description"
                >
                  &lt;Box sx={style} style={{ textAlign: 'center' }}>
                    &lt;Typography
                      id="modal-modal-title"
                      variant="h5"
                      component="h5"
                      style={{ margin: '20px 0px' }}
                    >
                      Permanently delete this conversation?
                    &lt;/Typography>
                    &lt;Stack spacing={2} direction="row">
                      &lt;Button
                        variant="text"
                        style={{
                          backgroundColor: '#BEC8BB',
                          color: '#FFFFFF',
                          marginLeft: '30%',
                          borderRadius: '10px',
                          width: '100px',
                          height: '40px',
                        }}
                      >
                        Nevermind
                      &lt;/Button>
                      &lt;Button
                        variant="contained"
                        style={{
                          backgroundColor: '#D12C1F',
                          color: '#FFFFFF',
                          borderRadius: '10px',
                          width: '40px',
                          height: '40px',
                        }}
                        onClick={DeleteConversation}
                      >
                        Delete
                      &lt;/Button>
                    &lt;/Stack>
                  &lt;/Box>
                &lt;/Modal>
                Delete conversation
              &lt;/MenuItem>
              &lt;br />
              &lt;MenuItem
                onClick={() => {
                  blockConv(!blockConvS);
                }}
              >
                &lt;Modal
                  open={blockConvS}
                  onClose={() => {
                    blockConv(!blockConvS);
                  }}
                  aria-labelledby="modal-modal-title"
                  aria-describedby="modal-modal-description"
                >
                  &lt;Box sx={style} style={{ textAlign: 'center' }}>
                    &lt;Typography
                      id="modal-modal-title"
                      variant="h5"
                      component="h5"
                    >
                      Are you sure you want to block maryem-salah from
                      nadeen-dondon?
                    &lt;/Typography>
                    &lt;Typography
                      id="modal-modal-title"
                      variant="h6"
                      component="h6"
                    >
                      They will not be able to follow nadeen-dondon, send
                      nadeen-dondon messages, see nadeen-dondon in search
                      results, or interact with any of nadeen-dondon  posts.
                    &lt;/Typography>
                    &lt;Stack spacing={2} direction="row">
                      &lt;Button
                        variant="text"
                        style={{
                          backgroundColor: '#BEC8BB',
                          color: '#FFFFFF',
                          marginLeft: '30%',
                          borderRadius: '10px',
                          width: '100px',
                          height: '40px',
                        }}
                      >
                        Nevermind
                      &lt;/Button>
                      &lt;Button
                        variant="contained"
                        style={{
                          backgroundColor: '#D12C1F',
                          color: '#FFFFFF',
                          borderRadius: '10px',
                          width: '40px',
                          height: '40px',
                        }}
                      >
                        Block
                      &lt;/Button>
                    &lt;/Stack>
                  &lt;/Box>
                &lt;/Modal>
                Block maryem-salah
              &lt;/MenuItem>
            &lt;/MenuList>
          &lt;/Popover>
        ) : null}
        &lt;SouthEastIcon
          onClick={() => dispatch(removeChatBoxID({ id, friendImgS }))}
          style={{ fill: '#fff', margin: '2px' }}
        />
        &lt;CloseIcon
          onClick={() => dispatch(removeChatBoxIDOnly(id))}
          style={{ fill: '#fff', margin: '2px' }}
        />
      &lt;/Grid>
    &lt;/Grid>
  );
}

export default ChatTopBar;

ChatTopBar.propTypes = {
  id: PropTypes.string.isRequired,
  setMessages: PropTypes.func.isRequired,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ChatTopBar">ChatTopBar</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Nov 20 2021 21:03:36 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
